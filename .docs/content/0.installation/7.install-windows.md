# Install on Windows 11

## Step 1: Install Docker


Install Docker Community edition by executing the following command from an administrator powershell (procedure from https://learn.microsoft.com/en-us/virtualization/windowscontainers/quick-start/set-up-environment?tabs=dockerce#windows-server-2):

```ps1
Invoke-WebRequest -UseBasicParsing "https://raw.githubusercontent.com/microsoft/Windows-Containers/Main/helpful_tools/Install-DockerCE/install-docker-ce.ps1" -o install-docker-ce.ps1
.\install-docker-ce.ps1
```

Your computer will reboot once during the installation.

Once the computer have restarted, docker is up and running, but only accessible to system account.
If you want to authorize your user to do docker commands, you will need to perform the following commands from an administrator powershell and ensure you have modified the account variable with your actual account domain and name:

```ps1
$account="<DOMAIN>\<USERNAME>"
$npipe = "\\.\pipe\docker_engine"                                                                                 
$dInfo = New-Object "System.IO.DirectoryInfo" -ArgumentList $npipe                                               
$dSec = $dInfo.GetAccessControl()                                                                                 
$fullControl =[System.Security.AccessControl.FileSystemRights]::FullControl                                       
$allow =[System.Security.AccessControl.AccessControlType]::Allow                                                  
$rule = New-Object "System.Security.AccessControl.FileSystemAccessRule" -ArgumentList $account,$fullControl,$allow
$dSec.AddAccessRule($rule)                                                                                        
$dInfo.SetAccessControl($dSec)
```

After executing these commands, newly open terminals with your account will be able to reach docker engine.

You can test that everything is working properly with the following commands:

```sh
docker --version
docker run --rm hello-world:nanoserver
```


## Step 2: Install Chocolatey


- Open PowerShell as Administrator:
- Run the following commands to install Chocolatey:

```sh
Set-ExecutionPolicy Bypass -Scope Process -Force; `
[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; `
iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
```

### Install Additional Tools:

Use Chocolatey to install necessary tools:

```sh
choco install just terraform mongodb-shell --confirm
```
Verify Installation:

Check the installation of tools like just:

```sh
just --version
```

## Step 3: Deploy ArmoniK Core

Clone Your Repository:
        Use Git to clone your repository via SSH.

- Deploy ArmoniK Core:
Run the following command to deploy ArmoniK Core locally:

```sh
just -v tag=<your-tag> object=local worker=htcmock ingress=false prometheus=false grafana=false seq=false queue=rabbitmq deploy
```

- The `<your-tag>` corresponds to the version of the Armonik.Core image you want to deploy. This should match the version of the image that has been built and pushed to your container registry. For example, it could be something like `0.36.0`.

- Specify the appropriate tag for your deployment to ensure that the correct version of the ArmoniK.Core image is used.

### Example
If you want to deploy version `0.36.0` of the ArmoniK.Core image, you would run:

```sh
just -v tag=0.36.0 object=local worker=htcmock ingress=false prometheus=false grafana=false seq=false queue=rabbitmq deploy
```
